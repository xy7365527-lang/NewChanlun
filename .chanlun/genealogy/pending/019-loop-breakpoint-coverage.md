# 019 — 元编排的循环结构缺少断点覆盖

**状态**: 生成态
**类型**: meta-rule
**日期**: 2026-02-18
**溯源**: [新缠论]
**域**: 元编排方法论（循环控制）

---

## 矛盾描述

元编排定义了 7 个循环结构（蜂群主循环、概念生成循环、质询循环、回溯扫描循环、二阶反馈循环、热启动恢复循环、谱系张力碰撞循环），但只有热启动恢复循环（C6）的断点覆盖基本完整。其余 6 个循环存在不同程度的断点缺失，导致 compact/新对话/编排者中断时状态丢失或循环失控。

**核心张力**：CLAUDE.md 原则7（"ceremony 是持续执行授权，commit/push 不是断点"）解决了蜂群效率问题，但与状态可恢复性之间存在未调和的张力——"不停歇"和"可恢复"不是同一件事。

## 发现过程

### 触发事件

编排者要求评估"元编排中没有覆盖到的循环断点"。

### 分析方法

穷尽扫描 SKILL.md(v3.3)、CLAUDE.md、6 个结构工位 agent 定义、ceremony/ritual/escalate/inquire 4 个命令定义、2 个 hooks。识别出全部循环结构后，逐一检查其持久化机制。

### 识别出的 7 个循环

| # | 循环 | 断点覆盖 |
|---|------|---------|
| C1 | 蜂群主循环 | 部分（L0/L1/L2 有，轮次间无） |
| C2 | 概念生成循环 | 无（分离和结算有，中间三阶段空白） |
| C3 | 质询循环 | 极少（退回-修正子循环无终止条件） |
| C4 | 回溯扫描循环 | 无（扫描进度无保存） |
| C5 | 二阶反馈循环 | 无（元编排变更无仪式门控） |
| C6 | 热启动恢复循环 | 大部分（PreCompact + SessionStart + ceremony 双模式） |
| C7 | 谱系张力碰撞循环 | 无（无递归深度限制，无范围策略） |

### 6 个高风险缺口

- **G1**: 蜂群轮次汇总的丢失窗口（C1）
- **G2**: 概念分离后形式化进度不可恢复（C2）
- **G3**: 质询退回-修正无限循环（C3）
- **G4**: 元编排进化无仪式门控（C5）— **自指性缺口**
- **G5**: 谱系张力检查无限递归（C7）
- **G6**: 谱系张力检查覆盖范围膨胀（C7）

## 推导链

1. 元编排定义了 7 个循环结构（从 SKILL.md 和 agent 定义中提取）
2. 每个循环需要断点机制（保存/恢复/终止），否则 compact 或新对话会导致状态丢失
3. 017 号谱系解决了状态**容量**膨胀（session 从叙事变为指针），但未解决**时序**断点问题
4. 016 号谱系证明规则无代码强制不执行——断点机制如果只是概念层规则，不会被执行
5. ∴ 每个循环的断点机制需要 runtime 层面的强制，而非仅是文档中的描述

## 谱系链接

- **前置**: 017-session-as-pointer（解决了容量膨胀，未解决时序断点）
- **前置**: 016-runtime-enforcement-layer（断点规则需要 runtime 强制）
- **前置**: 013-swarm-structural-stations（蜂群循环的基础架构）
- **关联**: 012-genealogy-is-discovery-engine（G5/G6 与 012 存在张力——无限发现 vs 有限上下文）
- **关联**: 015-method-is-content（G4 是 015 命题的又一实例——方法不适用于自身）

## 子发现（详见独立谱系）

- 019a: G1+G2 — 轮次和形式化进度的丢失窗口
- 019b: G3 — 质询退回-修正无限循环
- 019c: G4 — 元编排进化无仪式门控（自指性缺口）
- 019d: G5+G6 — 谱系张力检查的递归与范围问题

## 影响

- 元编排的所有循环定义文件（SKILL.md、agent 卡、command 定义）
- PreCompact hook 的中断点继承逻辑
- 谱系模板的 related_records 格式
- /ritual 命令的覆盖范围
- /inquire 命令的状态管理

## 来源

- [新缠论] — 编排者发起的系统性审计
