# 035 数学工具结晶：从 PDF 到 skill 的压缩

- **状态**: 已结算
- **日期**: 2026-02-18
- **类型**: 语法记录（已在运作的规则显式化：数学语言与缠论语言的对应关系）

## 矛盾/发现

6份PDF文档（`docs/pdfs/`）提供了缠论形式化所需的数学工具框架。这些文档内容庞大（合计 ~600 页），不可能也不应该全部驻留在上下文中。需要将其**压缩为 skill**——只提取对照表、引入约束、验证模板，其余按需从 PDF 加载。

关键发现：数学工具的引入有严格的**位置约束**。在等价关系尚未封闭时引入范畴论语言会过早污染概念空间；在不变量已被读出后引入则已无必要。数学工具的激活窗口 = 等价关系封闭后、不变量读出前。

这是知识结晶（011号谱系）在具体场景中的实例：PDF 中的数学知识在上下文中经历了扩张期（读取、碰撞、提取对应关系），现在进入收缩期（净新区分量递减），需要析出为外部文件释放上下文空间。

## 推导链

1. 6份PDF提供L0-L5分层数学框架 [外部输入]
2. PDF内容 ~600 页，全量加载不可能也不必要 [上下文约束]
3. 知识结晶原则（011）：收缩完成后析出为外部文件 [已结算]
4. 激活条件的逻辑必然性：
   - 等价关系未封闭 → 数学语言映射的锚点不稳定 → 过早引入会产生漂移
   - 不变量已读出 → 数学工具的目的已完成 → 再加载浪费上下文
   - → 激活窗口 = [等价关系封闭, 不变量读出) 的半开区间
5. skill 内容三要素：
   - 对照表：缠论语言 ↔ 数学语言（从 PDF 中压缩提取）
   - 引入位置约束：L1→L2 之间
   - 验证模板：换序律测试、跨标的迁移不变性测试

## 当前产出

- `.claude/skills/math-tools/SKILL.md` — 压缩式 skill ✅
- 此谱系记录 ✅

## 来源 PDF 清单

| PDF | 页数 | 核心提取 |
|-----|------|---------|
| 数学工具应用分析 | 23 | L0-L5 分层框架、对照表 |
| 新颖点：保持尺度态射 | 9 | 自然变换、换序律 I∘f = f'∘I |
| 候选不变量：行为同余商 | 16 | 行为商、coalgebra、Myhill-Nerode |
| 桥接：新缠行为等价与类型空间 | 7 | Obs-bisimulation、σ-algebra |
| 启动等价关系 | 406 | 结构本体枚举（按需加载） |
| 不变量映射 | 139 | 断点检测工具（按需加载） |

## 谱系链接

- 前置: 023-equivalence-relation-formalization（等价关系是数学工具的锚点）
- 前置: 025-equivalence-demotion-to-screening（L2流转关系需要数学工具支撑）
- 关联: 020a-unified-ontology-statement（结晶原则的具体实例）
- 关联: 020-constitutive-contradiction（skill 是知识维度的结晶）

## 结算条件

1. ✅ skill 文件创建完成（`.claude/skills/math-tools/SKILL.md`，压缩式）
2. ✅ frontmatter 含 `genealogy_source` 和 `activation_condition`/`activation_check`
3. ✅ 对照表经编排者审阅（session 评价"概念和实现没有脱节"）
4. ✅ 验证模板：`test_commuting_diagram` + `test_cross_instrument_invariance`
