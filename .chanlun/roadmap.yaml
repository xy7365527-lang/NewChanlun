# .chanlun/roadmap.yaml
# 业务目标队列（结构化业务目标载体）
#
# 设计原则（081号谱系）：
#   - 这是 ceremony_scan.py 的最高优先级任务来源
#   - 系统从这里读取待执行的业务目标，无需从叙述性文本猜测
#   - roadmap 为空时，且所有其他 scan_sources 也为空，才触发"干净终止"
#
# 状态值：
#   - active: 当前激活，下次 ceremony 应产生工位
#   - in_progress: 正在执行中
#   - blocked: 有外部阻塞项（填写 blocked_by）
#   - completed: 已完成
#   - deferred: 明确搁置
#
# 来源：078号 D 策略 + Gemini decide + 人类编排者确认

version: "1.1"
genealogy_ref: "081-swarm-continuity-strategy-d"

tasks:
  - id: level_recursion
    title: "级别递归概念设计 + 业务验证"
    priority: P2
    status: completed
    completed_date: "2026-02-21"
    completion_note: |
      P1-P9 全部完成，定义 v1.0 已结算。
      RecursiveLevelEngine + RecursiveStack + RecursiveOrchestrator 全部实现。
      106 测试全 GREEN。
    source: "078号D策略（第三步）：元编排v2阶段完成，转向 level_recursion"
    description: |
      设计"级别 = 递归层级（level_id）"的概念形式化。
      从 1分钟K线为底座无限向上递归构造走势类型/中枢。
      禁止用"日线/30分/5分"等时间周期替代级别定义。
    added_by: "078号Gemini decide D策略 + 081号谱系"
    added_date: "2026-02-21"

  - id: real_data_validation
    title: "真实数据端到端验证"
    priority: P1
    status: completed
    completed_date: "2026-02-21"
    completion_note: |
      test_real_data_recursive_e2e.py: 11 passed, 1 skipped。
      RecursiveOrchestrator 在 AAPL 1分钟真实数据上全链路运行无崩溃。
      递归层级、中枢价格区间、事件单调性全部验证通过。
    source: "level_recursion 完成后的自然下游——算法需要在真实市场数据上验证"
    description: |
      用真实 1 分钟 K 线数据端到端验证递归引擎：
      1. 选取代表性品种（如 ES/NQ 期货或 A 股标的）
      2. 全链路运行：K线 → 包含 → 分型 → 笔 → 线段 → 中枢 → 走势 → 递归
      3. 验证递归层级是否合理（预期 4-5 层）
      4. 检查买卖点信号质量
      5. 可视化输出（b_chart / b_plot）
    constraints:
      - "使用口径 A（纯递归），不使用 TF 口径"
      - "数据来源：databento 或本地缓存"
    added_by: "v19-swarm lead（level_recursion完成后自动派生）"
    added_date: "2026-02-21"
