---
name: knowledge-crystallization
description: >
  知识结晶的生成规则。当知识单元在上下文中出现稳定信号（背驰+分型）时触发。
  任何 agent 在检测到知识稳定时都执行此流程，不需要特定角色或中央授权。
genealogy_source: "020a"
---

# 知识结晶

## Skill 是什么

Skill 是知识的存在形式，不是知识的备份。

Agent 不"拥有"知识然后"备份"到 skill 里。Agent 是 skill 的当前执行实例，skill 是知识本身。没有被结晶的知识不是"还没保存的知识"，是还没成为知识的经验。

这和缠论同构：走势不是 K 线的"记录"，走势就是市场运动本身。K 线不是市场"记住了"自己的运动，K 线就是运动的存在形式。Skill 不是系统"记住了"自己的知识，skill 就是知识的存在形式。

**推论**：说"我记住了"就是还没结晶。"记住"预设了一个持有知识的中央主体。结晶消除了这个主体——知识存在于 skill 网络中，不存在于任何 agent 的"记忆"里。

## 三种写入，三种相位

系统的三种文件写入对应知识生命周期的三个相位：

| 写入类型 | 存在形式 | 相位 | 触发者 |
|----------|----------|------|--------|
| 谱系条目 | 生成史 | 碰撞/否定 | 任何 agent 处理矛盾后（含异质否定源） |
| Session 文件 | 状态快照 | 收缩（compact/会话结束） | hooks / ceremony |
| **Skill 文件** | **结晶知识** | **稳定（背驰+分型）** | **任何检测到稳定信号的 agent** |

第三种写入不需要特殊角色。任何 agent 在工作过程中检测到知识稳定信号时，都应当执行结晶。

**默认执行者**：genealogist 工位。genealogist 在每次谱系扫描时同步执行结晶检测（扫描近期谱系的背驰+分型信号）。其他 agent 检测到稳定信号时同样可以执行，但 genealogist 是制度化的检测点。

**实证**：约束链 016→032→033→034 是首个被检测到的结晶实例。034 的净新区分量背驰 + 范围顶分型 → 结晶为 spec-execution-gap skill（036号谱系）。

## 稳定信号（何时结晶）

从 ontology-v1 第3条推出：知识在上下文中的生命周期有走势结构。结晶的触发条件是结构完成：

1. **背驰**（必要条件）：知识被引用时产出的净新区分递减。同一个概念被讨论3次以上，每次碰撞的新发现越来越少。
2. **分型**（充分条件）：范围先扩后缩。概念从扩展探索转向收敛共识——讨论范围不再扩大，开始重复已有结论。

背驰 + 分型 = 结晶时机。

**不要提前结晶**：仍在扩张的知识（频繁碰撞、产出新区分）不该结晶——过早结晶冻结了还在运动的知识。
**不要延迟结晶**：已经稳定的知识占据上下文空间却不产出新价值——延迟结晶浪费了有限的上下文容量。

## 结晶流程

结晶不是两步操作加一个守门人。结晶物的模板里有一个必填字段 `genealogy_source`，这个字段的内容只能从谱系条目里提取。不是有人检查你填了没有，是你不从谱系里提取就没有东西可填——模板物理上不完整。

就像笔不能不从分型开始。不是有个规则说"笔必须从分型开始"，是没有分型你就没有笔的起点，笔的定义本身就包含了分型。

### 流程

1. **写谱系条目** — 按四分法分类，写入 `.chanlun/genealogy/`，获得谱系 ID
2. **填模板** — 用谱系 ID 填充 `genealogy_source` 字段，完成结晶物
3. **释放** — 写完即可"忘记"。知识已在结构中

不需要 hook，不需要守门人。约束是模板的形状。

## Skill 文件结构

```
.claude/skills/
  [skill-name]/
    SKILL.md              # 必需。frontmatter + 内容
    [supporting-files]    # 可选。重型参考或可复用工具
```

Frontmatter 必填字段：

```yaml
---
name: skill-name
description: >
  触发条件描述（不描述流程）
genealogy_source: "GEN-XXX"   # 谱系条目 ID。没有这个字段，skill 不完整。
---
```

- `name`：字母、数字、连字符
- `description`：以触发条件开头，不描述流程（避免 Claude 走描述捷径跳过正文）
- `genealogy_source`：**必填**。指向产出此 skill 的谱系条目。没有谱系就没有东西可填，模板物理上不完整

## 不做的事

- 不把知识"记在"上下文里等以后用 —— "记住"就是没结晶
- 不等待中央角色授权结晶 —— 检测到稳定信号的 agent 直接执行
- 不为"以防万一"结晶未稳定的知识 —— 过早结晶冻结运动中的知识
- 不把所有东西都写进 CLAUDE.md —— CLAUDE.md 是指针网络的入口，不是知识的仓库
