---
name: spec-execution-gap
description: >
  声明-能力一致性缺口检测。当系统任何层级出现"声明了 X 但实际能力不匹配"的模式时触发。
  约束链 016→032→033→034 的结晶产物：四个层级重复验证的同构失效模式。
genealogy_source: "036"
---

# 声明-能力一致性缺口检测（Spec-Execution Gap）

## 核心原则

> 系统中任何层级（规则层、权限层、工具层、路由层），声明（declaration）与实际能力（capability）的不一致都会导致同构的失效模式。解法不是在声明层加更多约束（无限维打地鼠），而是正面定义行为空间（specification）+ 物理约束能力边界（capability restriction）。

## 同构模式（四层验证）

| 层级 | 声明 | 实际能力 | 缺口 | 谱系 |
|------|------|---------|------|------|
| 规则层 | "Lead 不自行执行任务" | Lead 有 Edit/Write/Bash | 知道规则 ≠ 执行规则 | 016 |
| 权限层 | hook 强制 Lead 行为 | hook 可被绕过/遗漏 | 外部强制 < 能力剥夺 | 032 |
| 路由层 | "Lead 不做 X"（prohibition） | Lead 有路由自由度 | 约束 < 规范 | 033 |
| 工具层 | tools 字段声明工具集 | 实际可调用不受限 | 声明 ≠ 能力 | 034 |

## 检测模式

当你在任何层级看到以下模式时，这是 spec-execution gap：

1. **声明-能力分离**: 某处声明了"应该做 X"或"不应该做 Y"，但执行者的实际能力不受此声明约束
2. **约束堆叠**: 为解决一个绕过问题，在声明层加了更多约束（打地鼠模式）
3. **规则膨胀**: 规则数量增长但违规率不下降

## 修复模式

不要在声明层加更多约束。两步修复：

1. **正面定义行为空间（specification）**: 不说"不做什么"，说"做什么"。穷举合法行为，未列出的 = 不合法。（033 模式）
2. **物理约束能力边界（capability restriction）**: 不靠规则禁止，靠物理剥夺能力。没有能力 = 不可能违规。（032 模式）

## 不做的事

- 不在声明层加更多 prohibition（这是此 skill 要消除的反模式）
- 不假设"写了规则就会被遵守"（016 的核心发现）
- 不把 spec-execution gap 当 bug 修——它是架构层问题，需要架构层解法
